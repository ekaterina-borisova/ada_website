<!-- _includes/disease_analysis.html -->
<div class="disease-analysis">
    <div class="selector-container">
        <label for="disease-select" class="selector-label">Select Disease for Analysis:</label>
        <select id="disease-select" class="disease-dropdown">
            <option value="plot_HIV">Human Immunodeficiency Virus</option>
            <option value="plot_Plasmodium_falciparum">Plasmodium falciparum</option>
            <option value="plot_Poliovirus">Poliovirus</option>
            <option value="plot_Plasmodium_vivax">Plasmodium vivax</option>
            <option value="plot_Tuberculosis">Mycobacterium tuberculosis</option>
            <option value="plot_Escherichia_coli">Escherichia coli</option>
            <option value="plot_Hepatitis_C">Hepatitis C</option>
            <option value="plot_Staphylococcus_aureus">Staphylococcus aureus</option>
        </select>
    </div>

    <div id="plot-container" class="plot-container">
        <div id="plot_HIV" class="plot-item">{% include plot_HIV.html %}</div>
        <div id="plot_Plasmodium_falciparum" class="plot-item" style="display: none;">{% include plot_Plasmodium_falciparum.html %}</div>
        <div id="plot_Poliovirus" class="plot-item" style="display: none;">{% include plot_Poliovirus.html %}</div>
        <div id="plot_Plasmodium_vivax" class="plot-item" style="display: none;">{% include plot_Plasmodium_vivax.html %}</div>
        <div id="plot_Tuberculosis" class="plot-item" style="display: none;">{% include plot_Tuberculosis.html %}</div>
        <div id="plot_Escherichia_coli" class="plot-item" style="display: none;">{% include plot_Escherichia_coli.html %}</div>
        <div id="plot_Hepatitis_C" class="plot-item" style="display: none;">{% include plot_Hepatitis_C.html %}</div>
        <div id="plot_Staphylococcus_aureus" class="plot-item" style="display: none;">{% include plot_Staphylococcus_aureus.html %}</div>
    </div>

    <div id="description" class="description-container">
        <p>Analysis of HIV research distribution reveals significant research activity in regions with varying prevalence rates.</p>
    </div>
</div>

<style>
    .disease-analysis {
        margin: 20px 0;
        padding: 20px;
        background-color: white;
        border-radius: 8px;
        width: 100%;
    }

    .selector-container {
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
    }

    .selector-label {
        font-weight: 500;
        color: #333;
        min-width: 200px;
    }

    .disease-dropdown {
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
        min-width: 250px;
        max-width: 100%;
        background-color: rgb(42, 40, 75);
    }

    .plot-container {
        margin-top: 20px;
        padding: 20px;
        background-color: #ffffff;
        border-radius: 4px;
        width: 100%;
        overflow-x: auto;
    }

    .plot-item {
        width: 100%;
    }

    .plot-item table {
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 !important;
    }

    .plot-item td, .plot-item th {
        white-space: nowrap;
        padding: 8px;
    }

    .plot-item iframe {
        width: 100% !important;
        min-height: 500px;
    }

    .description-container {
        margin-top: 20px;
        padding: 15px;
        background-color: #f8f9fa;
        border-radius: 4px;
        border-left: 4px solid #0066cc;
    }

    .description-container p {
        margin: 0;
        line-height: 1.6;
        color: #444;
    }

    @media screen and (max-width: 768px) {
        .selector-container {
            flex-direction: column;
            align-items: stretch;
        }

        .selector-label {
            min-width: unset;
        }

        .disease-dropdown {
            width: 100%;
        }
    }
</style>

<script>
    const descriptions = {
        'plot_HIV': 'Analysis of HIV research distribution reveals significant research activity in regions with varying prevalence rates.',
        'plot_Plasmodium_falciparum': 'Distribution of P. falciparum research demonstrates complex relationships between endemic regions and research centers.',
        'plot_Poliovirus': 'Poliovirus research patterns show historical trends and current focus areas.',
        'plot_Plasmodium_vivax': 'P. vivax research distribution indicates varying research priorities across regions.',
        'plot_Tuberculosis': 'Tuberculosis research shows global distribution patterns with notable variations.',
        'plot_Escherichia_coli': 'E. coli research demonstrates wide geographical distribution.',
        'plot_Hepatitis_C': 'Hepatitis C research distribution reveals global patterns in research focus.',
        'plot_Staphylococcus_aureus': 'S. aureus research patterns indicate global distribution of research efforts.'
    };

    function updatePlot(selectedValue) {
        const plots = document.getElementsByClassName('plot-item');
        for (let plot of plots) {
            plot.style.display = 'none';
        }
        
        const selectedPlot = document.getElementById(selectedValue);
        if (selectedPlot) {
            selectedPlot.style.display = 'block';
        }

        const description = document.getElementById('description').querySelector('p');
        description.textContent = "";
    }

    document.addEventListener('DOMContentLoaded', function() {
        const select = document.getElementById('disease-select');
        select.addEventListener('change', function() {
            updatePlot(this.value);
        });
    });
</script>